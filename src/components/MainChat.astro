---
export interface Props {
  channelName?: string;
  channelIcon?: string;
  placeholder?: string;
}

const { 
  channelName = 'Direct Messages', 
  channelIcon = 'ðŸ’¬',
  placeholder = 'Message @user'
} = Astro.props;
---

<div class="main-chat">
  <div class="chat-header">
    <div class="channel-info">
      <span class="channel-icon">{channelIcon}</span>
      <span class="channel-name">{channelName}</span>
    </div>
    <div class="channel-actions">
      <button class="action-btn">
        <img src="/icons/svg/bell.svg" alt="Bell" class="action-icon" />
      </button>
      <button class="action-btn">
        <img src="/icons/svg/pin.svg" alt="Pin" class="action-icon" />
      </button>
      <button class="action-btn">
        <img src="/icons/svg/users.svg" alt="Users" class="action-icon" />
      </button>
      <button class="action-btn">
        <img src="/icons/svg/dots.svg" alt="More" class="action-icon" />
      </button>
    </div>
  </div>

  <div class="messages-container">
    <div class="messages">
      <slot />
    </div>
  </div>

  <div class="message-input-container">
    <div class="message-input-wrapper">
      <button class="attachment-btn">+</button>
      <input type="text" class="message-input" placeholder={placeholder} />
      <button class="emoji-btn">
        <img src="/icons/svg/gift.svg" alt="Gift" class="input-icon" />
      </button>
      <button class="emoji-btn">
        <img src="/icons/svg/photo.svg" alt="Photo" class="input-icon" />
      </button>
      <button class="emoji-btn">
        <img src="/icons/svg/sticker.svg" alt="Sticker" class="input-icon" />
      </button>
      <button class="emoji-btn">
        <img src="/icons/svg/smile.svg" alt="Emoji" class="input-icon" />
      </button>
      <button class="emoji-btn">
        <img src="/icons/svg/game-pad.svg" alt="Game" class="input-icon" />
      </button>
    </div>
  </div>
</div>

<style>
  .main-chat {
    grid-area: main-chat;
    display: flex;
    flex-direction: column;
    background-color: var(--discord-bg-primary);
  }

  .chat-header {
    height: 48px;
    padding: 0 16px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    border-bottom: 1px solid var(--discord-bg-tertiary);
  }

  .channel-info {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .channel-actions {
    display: flex;
    gap: 16px;
  }

  .action-btn {
    background: none;
    border: none;
    color: var(--discord-interactive-normal);
    cursor: pointer;
    font-size: 16px;
  }

  .action-btn:hover {
    color: var(--discord-interactive-hover);
  }

  .action-icon {
    width: 16px;
    height: 16px;
    filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);
  }

  .input-icon {
    width: 20px;
    height: 20px;
    filter: brightness(0) saturate(100%) invert(100%) sepia(0%) saturate(0%) hue-rotate(93deg) brightness(103%) contrast(103%);
  }

  .messages-container {
    flex: 1;
    overflow-y: auto;
    overflow-x: hidden;
    padding: 16px;
    max-height: calc(100vh - 152px);
    scrollbar-width: thin;
    scrollbar-color: var(--discord-scrollbar-thin-thumb) var(--discord-scrollbar-thin-track);
  }

  .messages-container::-webkit-scrollbar {
    width: 8px;
  }

  .messages-container::-webkit-scrollbar-track {
    background: var(--discord-scrollbar-auto-track);
  }

  .messages-container::-webkit-scrollbar-thumb {
    background: var(--discord-scrollbar-auto-thumb);
    border-radius: 4px;
  }

  .messages-container::-webkit-scrollbar-thumb:hover {
    background: var(--discord-bg-tertiary);
  }

  .messages {
    display: flex;
    flex-direction: column;
    gap: 16px;
  }

  .message-input-container {
    padding: 0 16px 24px;
  }

  .message-input-wrapper {
    background-color: #202024;
    border-radius: 8px;
    padding: 0 16px;
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .attachment-btn, .emoji-btn {
    background: none;
    border: none;
    color: var(--discord-interactive-normal);
    cursor: pointer;
    font-size: 20px;
    padding: 8px;
  }

  .message-input {
    flex: 1;
    background: none;
    border: none;
    color: var(--discord-text-normal);
    font-size: 14px;
    padding: 12px 0;
    outline: none;
  }

  .message-input::placeholder {
    color: var(--discord-text-muted);
  }
</style>
